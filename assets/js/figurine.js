(()=>{"use strict";const e={K:"♔",Q:"♕",R:"♖",B:"♗",N:"♘"},t=/\b(O-O-O|O-O|[KQRBN][a-h]?[1-8]?x?[a-h][1-8](?:=[QRBN])?[+#]?|[KQRBN]x[a-h][1-8](?:=[QRBN])?[+#]?)\b/g,o=new Set(["SCRIPT","STYLE","CODE","PRE","TEXTAREA","INPUT","SELECT","OPTION","NOSCRIPT"]);function n(e){return/[KQRBN]|O-O/.test(e)}function c(c){const r=c.nodeValue;if(!r||!n(r))return;const d=r.replace(t,(t=>{if("O-O"===t||"O-O-O"===t)return t;const o=t.charAt(0);return e[o]?e[o]+t.slice(1):t}));d!==r&&(c.nodeValue=d)}function r(e){const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode(e){const t=e.parentNode;return t?o.has(t.nodeName)||t.closest&&t.closest("pgn")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let n;for(;(n=t.nextNode());)c(n)}function d(){r(document.body);new MutationObserver((e=>{for(const t of e)t.addedNodes?.forEach((e=>{1===e.nodeType&&r(e)}))})).observe(document.body,{childList:!0,subtree:!0}),window.ChessFigurine={run:e=>r(e||document.body)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d()})();
